<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Prezident maktabi</title>
    <link rel="stylesheet" href="../css/form.css" />
    <link rel="stylesheet" href="../css/home.css" />
    <script defer src="../scripts/register.js"></script>
    <script defer src="https://telegram.org/js/telegram-web-app.js"></script>

    <script>
      // Function to calculate age from date of birth
      function calculateAge() {
        const dob = document.querySelector("input[name='dob']").value;
        if (dob) {
          const birthDate = new Date(dob);
          const today = new Date();
          let age = today.getFullYear() - birthDate.getFullYear();
          const month = today.getMonth();
          if (
            month < birthDate.getMonth() ||
            (month === birthDate.getMonth() &&
              today.getDate() < birthDate.getDate())
          ) {
            age--;
          }
          document.querySelector("input[name='age']").value = age;
        }
      }

      document.addEventListener("DOMContentLoaded", () => {
        // Update age when the date of birth is selected
        document
          .querySelector("input[name='dob']")
          .addEventListener("input", calculateAge);
      });
    </script>
  </head>
  <body>
    <h1 class="title">Prezident maktabiga tayyorlov</h1>

    <form id="presidentRegistrationForm" class="form">
      <label>
        To‘liq ismi:
        <input
          type="text"
          name="fullname"
          required
          placeholder="Ism Familiya"
        />
      </label>

      <label>
        Tug‘ilgan sana:
        <input type="date" name="dob" required />
      </label>

      <label>
        Qayerdansiz:
        <input
          type="text"
          name="location"
          required
          placeholder="Hudud yoki shahar"
        />
      </label>

      <label>
        Telefon raqamingiz:
        <input
          type="tel"
          name="phone"
          required
          placeholder="+998 90 123 45 67"
          pattern="^\+998\s?\d{2}\s?\d{3}\s?\d{2}\s?\d{2}$"
        />
      </label>

      <label>
        Hozir nechinchi sinf:
        <select name="current_grade" required>
          <option value="" disabled selected>Sinfni tanlang</option>
          <option value="1">1 - sinf</option>
          <option value="2">2 - sinf</option>
          <option value="3">3 - sinf</option>
          <option value="4">4 - sinf</option>
          <option value="5">5 - sinf</option>
          <option value="6">6 - sinf</option>
          <option value="7">7 - sinf</option>
          <option value="8">8 - sinf</option>
          <option value="9">9 - sinf</option>
          <option value="10">10 - sinf</option>
          <option value="11">11 - sinf</option>
        </select>
      </label>

      <input type="hidden" name="_csrf" value="<%= csrfToken %>" />

      <div class="btn_container">
        <button type="submit" class="btn">Yuborish</button>
      </div>
    </form>
  </body>
</html>
